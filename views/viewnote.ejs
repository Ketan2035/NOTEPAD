<% layout("/layouts/boilerplate")%>
<body class="bg-gray-100 text-gray-900 h-viewport">
  <!-- Main Layout -->
  <div class="flex w-screen h-[85vh]">
    <!-- Sidebar -->
    <aside class="w-1/4 bg-gray-400 shadow-md p-4 overflow-y-auto">
      <div class="flex justify-between items-center ">
        <h2 class="font-semibold text-lg">Notes</h2>
      </div>
      <ul class="space-y-2">
      <% for(note of notes){%>
        <li>
          <a href="/note/<%=note.id%>" class="block p-3 rounded-lg bg-gray-200 hover:bg-gray-50">
            <h3 class="font-semibold truncate"><%=note.title%></h3>
            <p class="text-sm text-gray-600 truncate"><%=note.content%></p>
            <div class="date">
                <p><%=note.written_at.toString().split(" ")[4]%></p>
                <p><%=note.written_at.toString().split(" ").slice(0,4).join("-")%></p>
            </div>
          </a>
        </li>
       <%}%>
      </ul>
    </aside>

    <main class="flex-1 p-6 overflow-y-auto">
        <div class="bg-gray-200 shadow-xl rounded-lg p-6 max-w-lg w-full h-object-fit m-auto flex flex-col justify-between overflow-y-auto">
        
        <!-- Title + Content -->
        <div>
            <h1 class="text-2xl font-bold text-gray-800 mb-4">Title : <%= Note.title %></h1>
            <p class="text-gray-700 break-words">Note : <%= Note.content %></p>
        </div>

        <!-- Buttons fixed at bottom -->
        <div class="flex justify-between mt-6">
            <!-- Back button -->
            <a href="/"
            class="px-4 py-2 bg-gray-300 rounded-lg hover:bg-gray-400 transition">
            ‚ÜêBack
            </a>

            <!-- Edit button -->
            <a href="/notes/<%= note._id %>/edit"
            class="px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition">
            Edit
            </a>

            <!-- Delete form -->
            <form action="/notes/<%= note._id %>?_method=DELETE" method="POST">
                <button type="submit"
                        class="px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition">
                    Delete
                </button>
            </form>
        </div>
        </div>
    </main>
  </div>
</body>

